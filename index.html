<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>LiL Notes - Documentation Hub</title>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
      <link href="https://unpkg.com/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
      <link rel="stylesheet" href="styles.css">
      <script defer src="https://cdn.tailwindcss.com"></script>
      <script defer src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
      <script defer src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
      <script defer src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>
</head>

<body
      class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-300">
      <!-- Mobile Menu Button -->
      <button onclick="toggleSidebar()"
            class="mobile-menu fixed top-4 left-4 z-50 p-2 glass rounded-lg dark:text-white">
            <i class="bi bi-list text-2xl"></i>
      </button>

      <div class="flex flex-col md:flex-row h-screen">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar glass w-full md:w-72 p-6 overflow-y-auto">
                  <div class="flex items-center justify-between mb-8">
                        <h1
                              class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent">
                              LittlE Notes
                        </h1>
                  </div>
                  <nav id="languageNav" class="space-y-2.5">
                        <!-- Languages will be inserted here -->
                  </nav>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-6 overflow-y-auto">
                  <div id="content"
                        class="max-w-4xl mx-auto glass p-8 rounded-xl dark:text-white prose dark:prose-invert">
                        <!-- Content will be inserted here -->
                  </div>
            </main>
      </div>

      <script>
            const languages = [
                  { name: 'JavaScript', color: '#F7DF1E', icon: '<i class="bi bi-filetype-js"></i>', file: 'javascript.md' },
                  { name: 'TypeScript', color: '#007ACC', icon: '<i class="bi bi-filetype-tsx"></i>', file: 'typescript.md' },
                  { name: 'Python', color: '#3776AB', icon: '<i class="bi bi-filetype-py"></i>', file: 'python.md' },
                  { name: 'Java', color: '#007396', icon: '<i class="bi bi-cup-hot"></i>', file: 'java.md' },
                  { name: 'HTML', color: '#E34F26', icon: '<i class="bi bi-filetype-html"></i>', file: 'html.md' },
                  { name: 'CSS', color: '#1572B6', icon: '<i class="bi bi-filetype-css"></i>', file: 'css.md' },
                  { name: 'React', color: '#61DAFB', icon: '<i class="bi bi-radioactive"></i>', file: 'react.md' },
                  { name: 'Node.js', color: '#339933', icon: '<i class="bi bi-node-plus"></i>', file: 'nodejs.md' },
            ];

            function renderLanguages() {
                  const nav = document.getElementById('languageNav');
                  languages.forEach(lang => {
                        const btn = document.createElement('button');
                        btn.className = 'w-full flex items-center p-4 rounded-lg glass hover:bg-opacity-70 transition-all dark:text-white';
                        btn.innerHTML = `
            <span class="mr-3 text-xl" style="color: ${lang.color}">${lang.icon}</span>
            <span class="font-medium">${lang.name}</span>
        `;
                        btn.onclick = () => {
                              loadDocumentation(lang.file);
                              if (window.innerWidth < 768) {
                                    toggleSidebar();
                              }
                        };
                        nav.appendChild(btn);
                  });
            }

            async function loadDocumentation(file) {
                  const content = document.getElementById('content');
                  try {
                        const response = await fetch(`markdown/${file}`);
                        if (response.ok) {
                              const markdown = await response.text();
                              const converter = new showdown.Converter();

                              converter.addExtension(() => {
                                    return [{
                                          type: 'output',
                                          regex: /<h([1-6])>([^<]+)<\/h\1>/g,
                                          replace: (match, level, text) => {
                                                const id = text.toLowerCase().replace(' ', '-');
                                                return `<h${level} id="${id}">${text}</h${level}>`;
                                          }
                                    }];
                              }, 'headingId');

                              const html = converter.makeHtml(markdown);
                              content.innerHTML = html;
                              Prism.highlightAll();
                        } else {
                              content.innerHTML = `<p class="text-red-600">Error: File not found.</p>`;
                        }
                  } catch (error) {
                        content.innerHTML = `<p class="text-red-600">Error: ${error.message}</p>`;
                  }

                  document.querySelectorAll('pre code').forEach(block => {
                        const pre = block.parentElement;
                        const copyButton = document.createElement('button');
                        copyButton.className = 'copy-btn';
                        copyButton.innerHTML = '<i class="bi bi-clipboard"></i>';
                        copyButton.onclick = () => {
                              navigator.clipboard.writeText(block.textContent);
                              copyButton.innerHTML = '<i class="bi bi-check2"></i>';
                              setTimeout(() => {
                                    copyButton.innerHTML = '<i class="bi bi-clipboard"></i>';
                              }, 2000);
                        };
                        pre.appendChild(copyButton);
                  });
            }

            function toggleTheme() {
                  document.documentElement.classList.toggle('dark');
            }

            function toggleSidebar() {
                  const sidebar = document.getElementById('sidebar');
                  sidebar.classList.toggle('active');
            }

            // Initialize
            renderLanguages();
            loadDocumentation('javascript.md');

            // Check if there's a stored theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                  if (savedTheme === 'dark') {
                        document.documentElement.classList.add('dark');
                  }
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                  document.documentElement.classList.add('dark');
            }
      </script>
</body>

</html>